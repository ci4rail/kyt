# ===================================================
# mounts
# ===================================================
mount=mount-kyt-api-gen:
  bind: "kyt-cli/openapi"
  path: "/local"
  read-only: false

# ===================================================
# jobs
# ===================================================
job=build-client-sources:
  use: image-openapi-generator
  command: generate -i /in/kyt-api-spec/kytapi.yaml -g go -o /local
  mounts:
    - mount-project-root
    - mount-kyt-api-gen
  sources:
    - kyt-api-spec/kytapi.yaml
  artifact:
    - kyt-cli/openapi
  user: "{user.uid}:{user.gid}"
  annotations:
    description: "-> build kyt-api-client sources"
    tags:
      - generate-sources
